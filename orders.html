<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>The Florist | Order History</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
    <style>
        /* CSS: Core Styles & Custom Animations (Common) */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .animate-fadeIn { animation: fadeIn 1.5s ease-out; }
        #menu-toggle:checked ~ #mobile-menu { transform: translateX(0); }

        /* Custom Colors from Prompt */
        .color-primary { color: #D1A3A4; } /* Muted Rose Pink */
        .bg-primary { background-color: #D1A3A4; }
        .color-accent { color: #B49B6E; } /* Goldenrod Accent */
        .bg-accent { background-color: #B49B6E; }
        .bg-background-light { background-color: #F8F6F2; }
        .bg-background-dark { background-color: #1A1A1A; }
    </style>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#D1A3A4", /* Muted Rose Pink */
                        "background-light": "#F8F6F2",
                        "background-dark": "#1A1A1A",
                        "text-light": "#333333",
                        "text-dark": "#F8F6F2",
                        "accent": "#B49B6E" /* Goldenrod Accent */
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"],
                        "serif": ["Playfair Display", "serif"],
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                },
            },
        }
    </script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
<div class="relative w-full overflow-x-hidden">

    <header class="sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-solid border-black/10 dark:border-white/10 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md px-6 md:px-10 lg:px-20 py-4">
        <div class="flex items-center gap-4 text-text-light dark:text-text-dark">
            <div class="text-3xl text-primary"><span class="material-symbols-outlined">local_florist</span></div>
            <h2 class="text-xl font-bold tracking-[-0.015em] font-serif">The Florist</h2>
        </div>
        
        <nav class="hidden md:flex flex-1 justify-center gap-9">
            <a class="text-sm font-medium hover:text-accent transition duration-300" href="index.html">Home</a>
            <a class="text-sm font-medium hover:text-accent transition duration-300" href="shop.html">Bouquets</a>
            <a class="text-sm font-medium hover:text-accent transition duration-300" href="auth.html">Account</a>
            <a class="text-sm font-bold text-accent transition duration-300" href="orders.html">My Orders</a>
            <a class="text-sm font-medium hover:text-accent transition duration-300" href="about.html">About</a>
        </nav>
        
        <div class="flex items-center gap-2">
            <a href="auth.html" class="flex h-10 w-10 cursor-pointer items-center justify-center overflow-hidden rounded-full hover:bg-primary/10 dark:hover:bg-white/5 transition duration-300">
                <span class="material-symbols-outlined">person</span>
            </a>
            <a href="cart.html" class="relative flex h-10 w-10 cursor-pointer items-center justify-center overflow-hidden rounded-full bg-primary/20 text-primary hover:bg-primary transition duration-300 hover:text-white">
                <span class="material-symbols-outlined">shopping_bag</span>
                <span class="absolute top-1 right-1 block h-2 w-2 rounded-full bg-accent animate-pulse"></span>
            </a>
            
            <input type="checkbox" id="menu-toggle" class="sr-only">
            <label for="menu-toggle" class="md:hidden flex h-10 w-10 cursor-pointer items-center justify-center overflow-hidden rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition duration-300">
                <span class="material-symbols-outlined">menu</span>
            </label>
        </div>
    </header>

    <nav id="mobile-menu" class="fixed inset-y-0 right-0 z-40 w-64 bg-background-light dark:bg-background-dark border-l border-black/10 dark:border-white/10 p-6 shadow-xl transform translate-x-full transition-transform duration-300 md:hidden">
        <div class="flex flex-col gap-4 pt-12">
            <a class="text-lg font-medium hover:text-accent transition duration-300" href="index.html">Home</a>
            <a class="text-lg font-medium hover:text-accent transition duration-300" href="shop.html">Bouquets</a>
            <a class="text-lg font-medium hover:text-accent transition duration-300" href="auth.html">Account</a>
            <a class="text-lg font-bold text-accent transition duration-300" href="orders.html">My Orders</a>
            <a class="text-lg font-medium hover:text-accent transition duration-300" href="about.html">About</a>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto flex-grow px-6 md:px-10 lg:px-20 py-12 animate-fadeIn">
        <div class="mb-10">
            <h1 class="text-4xl font-serif font-bold tracking-[-0.033em] text-text-light dark:text-text-dark text-center">My Order History</h1>
            <p class="mt-2 text-base font-normal leading-normal text-primary/80 text-center">Your past purchases and status updates.</p>
        </div>
        
        <div class="bg-primary/5 dark:bg-white/5 p-6 rounded-xl shadow-lg border border-primary/20">
            <div class="overflow-x-auto">
                <table class="min-w-full table-auto">
                    <thead>
                        <tr class="bg-primary/20 dark:bg-primary/30 text-left text-sm font-semibold text-text-light dark:text-text-dark">
                            <th class="px-4 py-3 rounded-l-lg">Order ID</th>
                            <th class="px-4 py-3">Date</th>
                            <th class="px-4 py-3">Items</th>
                            <th class="px-4 py-3">Total</th>
                            <th class="px-4 py-3 rounded-r-lg">Status</th>
                        </tr>
                    </thead>
                    <tbody id="order-history-table" class="divide-y divide-black/10 dark:divide-white/10">
                        <tr class="hover:bg-primary/5 transition duration-300">
                            <td class="px-4 py-4 text-sm font-medium">TF100293</td>
                            <td class="px-4 py-4 text-sm">25/11/2024</td>
                            <td class="px-4 py-4 text-sm">Ravishing Red (x1), Sunburst (x2)</td>
                            <td class="px-4 py-4 text-sm font-semibold">Rs. 2,100</td>
                            <td class="px-4 py-4"><span class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-green-500/80 text-white">Delivered</span></td>
                        </tr>
                        <tr class="hover:bg-primary/5 transition duration-300">
                            <td class="px-4 py-4 text-sm font-medium">TF100294</td>
                            <td class="px-4 py-4 text-sm">10/12/2024</td>
                            <td class="px-4 py-4 text-sm">Corporate Chic (x1)</td>
                            <td class="px-4 py-4 text-sm font-semibold">Rs. 600</td>
                            <td class="px-4 py-4"><span class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-yellow-500/80 text-white">Shipped</span></td>
                        </tr>
                        <tr id="last-order-row" class="hidden font-bold text-primary bg-primary/10">
                            <td class="px-4 py-4 text-sm" id="last-order-id"></td>
                            <td class="px-4 py-4 text-sm" id="last-order-date"></td>
                            <td class="px-4 py-4 text-sm" id="last-order-items"></td>
                            <td class="px-4 py-4 text-sm" id="last-order-total"></td>
                            <td class="px-4 py-4"><span class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-red-500/80 text-white" id="last-order-status">Pending Payment</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="mt-8 text-center text-sm text-text-light/70 dark:text-text-dark/70">
                Note: This is a frontend simulation. For real-time updates, please contact us on WhatsApp using your Order ID.
            </p>
        </div>
    </main>
    
    <footer class="bg-black/5 dark:bg-white/5 text-text-light/80 dark:text-text-dark/80 px-6 md:px-10 lg:px-20 py-16 mt-16">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-12">
            <div class="md:col-span-2">
                <h3 class="text-lg font-bold text-text-light dark:text-text-dark mb-4">Contact Us</h3>
                <p class="text-sm mb-2">127 1/398, Near Nilgiris & Ganga Sweets, Rajiv Gandhi Salai, OMR, Navalur, Chennai 603 113</p>
                <p class="text-sm mb-1">Phone: 044-35353222, +91 99400 25345</p>
                <p class="text-sm">Email: sales@theflorist.co.in</p>
            </div>
            <div>
                <h3 class="text-lg font-bold text-text-light dark:text-text-dark mb-4">Quick Links</h3>
                <ul class="space-y-2 text-sm">
                    <li><a class="hover:text-primary transition duration-300" href="shop.html">Bouquets</a></li>
                    <li><a class="hover:text-primary transition duration-300" href="auth.html">My Account</a></li>
                    <li><a class="hover:text-primary transition duration-300" href="orders.html">Order History</a></li>
                    <li><a class="hover:text-primary transition duration-300" href="about.html">About Us</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-lg font-bold text-text-light dark:text-text-dark mb-4">Follow Us</h3>
                <div class="flex items-center gap-4">
                    <a class="hover:text-accent transition duration-300" href="#"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.644-.069 4.85-.069zM12 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44c0-.795-.645-1.44-1.441-1.44z"/></svg></a>
                    <a class="hover:text-accent transition duration-300" href="#"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v2.385z"/></svg></a>
                    <a class="hover:text-accent transition duration-300" href="#"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616v.064c0 2.298 1.634 4.212 3.793 4.649-.65.177-1.336.213-2.033.16.586 1.913 2.344 3.217 4.422 3.255-1.728 1.345-3.837 2.088-6.04 1.88-1.893.121-3.837-.404-5.553-1.254 2.116 1.345 4.649 2.132 7.373 2.132 8.771 0 13.59-7.277 13.59-13.59 0-.205-.005-.41-.013-.615.932-.67 1.733-1.512 2.37-2.459z"/></svg></a>
                </div>
            </div>
        </div>
        <div class="text-center text-xs mt-12 border-t border-black/10 dark:border-white/10 pt-8">
            <p>Â© 2024 The Florist. All Rights Reserved. | Product subject to change as per availability.</p>
        </div>
    </footer>
</div>

<script>
    const orderKey = 'theFloristLastOrder';

    function loadLastOrder() {
        try {
            return JSON.parse(localStorage.getItem(orderKey));
        } catch (e) {
            return null;
        }
    }

    function renderOrderHistory() {
        const lastOrder = loadLastOrder();
        const lastOrderRow = document.getElementById('last-order-row');
        
        if (lastOrder && lastOrder.items.length > 0) {
            const itemSummary = lastOrder.items.map(item => `${item.name} (x${item.quantity})`).join(', ');

            document.getElementById('last-order-id').textContent = lastOrder.orderID;
            document.getElementById('last-order-date').textContent = lastOrder.date;
            document.getElementById('last-order-items').textContent = itemSummary;
            document.getElementById('last-order-total').textContent = `Rs. ${lastOrder.totals.total.toFixed(2)}`;
            
            const statusElement = document.getElementById('last-order-status');
            statusElement.textContent = lastOrder.status;
            statusElement.className = `inline-block px-3 py-1 text-xs font-semibold rounded-full text-white ${lastOrder.status === 'Pending Payment' ? 'bg-red-500/80' : 'bg-yellow-500/80'}`;

            lastOrderRow.classList.remove('hidden');
        } else {
             // Add a fallback message if no orders exist, assuming dummy orders are not enough
             if (!document.getElementById('no-orders-msg')) {
                const tbody = document.getElementById('order-history-table');
                const noOrdersRow = document.createElement('tr');
                noOrdersRow.id = 'no-orders-msg';
                noOrdersRow.innerHTML = `<td colspan="5" class="text-center py-8 text-lg text-text-light/50 dark:text-text-dark/50">No recent orders found.</td>`;
                tbody.appendChild(noOrdersRow);
             }
        }
    }

    document.addEventListener('DOMContentLoaded', renderOrderHistory);
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fadeIn');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.animate-fadeIn').forEach(element => {
            element.classList.remove('animate-fadeIn'); 
            observer.observe(element);
        });
    });
</script>


<!-- Mobile Menu + Chatbot -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const btn = document.querySelector('[data-mobile-toggle]');
  const menu = document.querySelector('[data-mobile-menu]');
  if(btn && menu){
    btn.addEventListener('click', ()=> menu.classList.toggle('hidden'));
  }
  // Chatbot
  const botBtn = document.createElement('button');
  botBtn.textContent="ðŸ’¬";
  botBtn.style.cssText="position:fixed;bottom:20px;right:20px;padding:10px;border-radius:50%;background:#ff69b4;color:#fff;font-size:20px;z-index:9999;";
  document.body.appendChild(botBtn);
  const box=document.createElement('div');
  box.style.cssText="position:fixed;bottom:80px;right:20px;width:280px;height:360px;background:#fff;border:1px solid #ddd;border-radius:10px;display:none;flex-direction:column;overflow:hidden;z-index:9999;";
  box.innerHTML='<div style="background:#ff69b4;color:#fff;padding:8px;">Florist Assistant</div><div id="cb" style="flex:1;padding:8px;overflow:auto;font-size:14px;"></div><div style="padding:6px;display:flex;gap:4px;"><input id="ci" style="flex:1;border:1px solid #ccc;padding:4px;border-radius:6px;"><button id="cs" style="padding:4px 8px;background:#ff69b4;color:#fff;border:none;border-radius:6px;">Send</button></div>';
  document.body.appendChild(box);
  botBtn.onclick=()=> box.style.display= box.style.display==="none"?"flex":"none";
  function reply(t){document.getElementById("cb").innerHTML+=`<div style="margin:4px 0;color:#555;">${t}</div>`;}
  document.getElementById("cs")?.addEventListener("click", ()=>{
    let v=document.getElementById("ci").value.trim(); if(!v)return;
    reply("You: "+v); document.getElementById("ci").value="";
    reply("Bot: Thanks for reaching out! Weâ€™ll help you with bouquets, deliveries, and custom floral arrangements ðŸŒ¸");
  });
});
</script>

</body>
</html>